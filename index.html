<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Î•Ï€Î¹Ï„Î±Î³Î¿Î›Î®Ï€Ï„Î·Ï‚">
<title>Î•Ï€Î¹Ï„Î±Î³Î¿Î›Î®Ï€Ï„Î·Ï‚</title>
<style>
*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
:root{
  --bg:#0d0f0c;--surf:#161812;--card:#1c1e19;
  --bdr:#2a2d24;--bdrL:#383c2e;
  --gold:#d4a853;--goldD:#7a5f28;--goldBg:rgba(212,168,83,0.1);
  --grn:#4caf82;--grnD:#1e5c3a;
  --txt:#e8e6df;--txtD:#6e6e62;--txtM:#404038;
  --red:#c95050;
}
html,body{min-height:100%;background:var(--bg);color:var(--txt);font-family:'Helvetica Neue',Arial,sans-serif;overscroll-behavior:none}
input,button{font-family:inherit;-webkit-appearance:none;appearance:none;outline:none;box-sizing:border-box}
input[type=file]{display:none!important}

/* NAV */
.hdr{background:var(--surf);border-bottom:1px solid var(--bdr);padding:12px 14px 0;position:sticky;top:0;z-index:50}
.hdr-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.logowrap{display:flex;align-items:center;gap:9px}
.logobox{width:34px;height:34px;background:#fff;border-radius:8px;overflow:hidden;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.logobox img{width:100%;height:100%;object-fit:contain}
.logotxt{font-family:Georgia,serif;font-size:17px;font-weight:700;color:var(--gold)}
.logosub{font-size:9px;color:var(--txtD);letter-spacing:1.5px;text-transform:uppercase}
.badge{background:var(--goldBg);border:1px solid var(--goldD);color:var(--gold);font-size:10px;font-weight:600;padding:4px 10px;border-radius:20px}
.nav{display:flex}
.ntab{flex:1;display:flex;flex-direction:column;align-items:center;gap:3px;padding:8px 4px 10px;cursor:pointer;border:none;border-bottom:2px solid transparent;font-size:11px;color:var(--txtM);font-weight:500;background:none;touch-action:manipulation}
.ntab.on{border-bottom-color:var(--gold);color:var(--gold)}

/* LAYOUT */
.main{padding:14px 14px 80px;max-width:500px;margin:0 auto}
.card{background:var(--card);border:1px solid var(--bdr);border-radius:14px;padding:16px;margin-bottom:12px}
.ctitle{font-family:Georgia,serif;font-size:16px;font-weight:600;color:#f5f2ea;margin-bottom:14px}
.tab{display:none}.tab.on{display:block}

/* INPUTS */
.lbl{display:block;font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:1.2px;color:var(--txtM);margin-bottom:5px}
.inp{width:100%;background:var(--surf);border:1px solid var(--bdrL);border-radius:9px;padding:12px;font-size:16px;color:var(--txt)}
.inp.ai{border-color:var(--grnD);color:#bfeed5}
.g2{display:grid;grid-template-columns:1fr 1fr;gap:9px}
.fld{margin-bottom:10px}

/* BUTTONS */
.btn{width:100%;padding:13px;border-radius:11px;border:none;font-size:14px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:7px;margin-top:9px;touch-action:manipulation}
.btn-gold{background:linear-gradient(135deg,var(--gold),#9a6e1e);color:#0d0f0c}
.btn-gold:disabled{opacity:.4}
.btn-grn{background:var(--grnD);color:#b8f0d4;border:1px solid var(--grn)}
.btn-ghost{background:transparent;color:var(--txtD);border:1px solid var(--bdrL)}
.btn-red{background:transparent;color:var(--red);border:1px solid rgba(201,80,80,.3)}
.btn-dashed{width:100%;padding:13px;border-radius:11px;border:1.5px dashed var(--bdrL);background:transparent;color:var(--gold);font-size:13px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:6px;touch-action:manipulation}

/* CHEQUE CARD */
.chq{background:var(--surf);border:1px solid var(--bdrL);border-radius:12px;padding:12px;margin-bottom:8px}
.chq-hdr{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.chq-lbl{font-size:11px;font-weight:700;color:var(--gold);text-transform:uppercase;letter-spacing:1px}
.chq-amt{font-family:Georgia,serif;font-size:16px;font-weight:700;color:var(--grn)}
.chq-del{background:none;border:none;color:var(--red);font-size:20px;cursor:pointer;padding:0 4px;line-height:1;touch-action:manipulation}
.chq-photo{width:100%;padding:9px;border-radius:9px;border:1px dashed var(--gold);background:var(--goldBg);color:var(--gold);font-size:12px;font-weight:600;cursor:pointer;margin-bottom:10px;touch-action:manipulation;display:flex;align-items:center;justify-content:center;gap:6px}

/* TOTAL */
.total{background:var(--goldBg);border:1px solid var(--goldD);border-radius:11px;padding:12px 14px;margin:2px 0 10px;display:flex;justify-content:space-between;align-items:center}
.total-lbl{font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:1px;color:var(--goldD)}
.total-sub{font-size:10px;color:var(--goldD);margin-top:2px}
.total-val{font-family:Georgia,serif;font-size:22px;font-weight:700;color:var(--gold)}

/* SHARE */
.sgrid{display:grid;grid-template-columns:1fr 1fr;gap:7px;margin-bottom:8px}
.sbtn{display:flex;align-items:center;justify-content:center;gap:6px;padding:12px 6px;border-radius:10px;border:1px solid transparent;background:var(--surf);font-size:12px;font-weight:600;cursor:pointer;touch-action:manipulation;width:100%}

/* RECEIPT */
.rwrap{border-radius:10px;overflow:hidden;border:1px solid var(--bdrL);margin-bottom:14px}

/* HISTORY */
.hitem{background:var(--card);border:1px solid var(--bdr);border-radius:13px;padding:12px 14px;margin-bottom:9px;display:flex;align-items:center;gap:12px;cursor:pointer}
.hico{width:40px;height:40px;background:var(--goldBg);border:1px solid var(--goldD);border-radius:9px;overflow:hidden;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.hico img{width:100%;height:100%;object-fit:contain}
.hmeta{flex:1;min-width:0}
.hname{font-size:14px;font-weight:600;color:var(--txt);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.hsub{font-size:11px;color:var(--txtD);margin-top:2px}
.hamt{font-family:Georgia,serif;font-size:18px;font-weight:700;color:var(--grn);text-align:right}
.hcnt{font-size:10px;color:var(--goldD);text-align:right}
.empty{text-align:center;padding:50px 20px;color:var(--txtM)}

/* MODAL */
.moverlay{position:fixed;inset:0;background:rgba(0,0,0,.88);z-index:200;display:flex;align-items:flex-end;justify-content:center}
.mbox{background:var(--card);border:1px solid var(--bdrL);border-radius:20px 20px 0 0;width:100%;max-width:500px;padding:8px 14px 30px;max-height:92vh;overflow-y:auto;-webkit-overflow-scrolling:touch}
.mhandle{width:36px;height:4px;background:var(--bdrL);border-radius:2px;margin:10px auto 14px}

/* PHOTO MODAL */
.poverlay{position:fixed;inset:0;background:rgba(0,0,0,.93);z-index:300;display:flex;align-items:flex-end;justify-content:center}
.pbox{background:var(--card);border:1px solid var(--bdrL);border-radius:20px 20px 0 0;width:100%;max-width:500px;padding:8px 14px 30px}
.ugrid{display:grid;grid-template-columns:1fr 1fr;gap:9px;margin-bottom:10px}
.ubtn{padding:22px 10px;border-radius:11px;border:1.5px dashed var(--bdrL);background:var(--surf);cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:6px;color:var(--txt);font-size:13px;font-weight:600;touch-action:manipulation;width:100%}
.ubtn span{font-size:28px}
.previmg{width:100%;border-radius:9px;max-height:130px;object-fit:cover;border:1px solid var(--bdrL);margin-bottom:8px}
.loader{display:flex;flex-direction:column;align-items:center;padding:20px;gap:10px}
.ring{width:40px;height:40px;border:3px solid var(--bdr);border-top-color:var(--gold);border-radius:50%;animation:spin .75s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* RECEIPT DOC */
.rdoc{background:#faf8f2;font-family:Arial,sans-serif;color:#1a1812;font-size:13px}
.rhd{background:#1a1812;padding:14px 14px 10px}
.rhd-row{display:flex;align-items:center;gap:10px;margin-bottom:8px}
.rlogo{width:46px;height:46px;background:#fff;border-radius:6px;overflow:hidden;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.rlogo img{max-width:100%;max-height:100%;object-fit:contain}
.rco{font-family:Georgia,serif;font-size:14px;color:#d4a853;font-weight:700}
.rafm{font-size:9px;color:rgba(212,168,83,.5);letter-spacing:2px;text-transform:uppercase}
.rtitle{text-align:center;font-family:Georgia,serif;font-size:16px;color:#d4a853;font-weight:700;letter-spacing:1px}
.rsub{text-align:center;font-size:9px;color:rgba(212,168,83,.4);letter-spacing:2px;margin-top:2px}
.rmeta{display:flex;justify-content:space-between;padding:7px 14px;background:#f0ece0;font-size:11px;color:#7a7060}
.ramtbox{background:#1a1812;padding:14px;text-align:center}
.ramtlbl{font-size:9px;color:rgba(212,168,83,.5);text-transform:uppercase;letter-spacing:2px;margin-bottom:3px}
.ramtval{font-family:Georgia,serif;font-size:30px;color:#d4a853;font-weight:700;line-height:1}
.ramtw{font-size:10px;color:rgba(212,168,83,.4);margin-top:3px;font-style:italic}
.rsec{padding:10px 14px 4px;background:#f5f0e4}
.rsectitle{font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:#7a6a50;margin-bottom:6px}
.rchqblock{border:1px solid #e0d8c8;border-radius:6px;padding:8px 10px;margin-bottom:6px;background:#faf8f2}
.rchqlbl{font-size:9px;font-weight:700;color:#9a7a40;text-transform:uppercase;letter-spacing:1px;margin-bottom:5px}
.rrow{display:flex;justify-content:space-between;padding:5px 0;border-bottom:1px solid #ede8dc;gap:8px}
.rrow:last-child{border-bottom:none}
.rrk{font-size:9px;color:#9a9080;text-transform:uppercase;letter-spacing:.8px;flex-shrink:0;padding-top:1px}
.rrv{font-size:11px;font-weight:600;text-align:right;color:#1a1812}
.rcommon{padding:8px 14px 0}
.rcommon .rrow{border-bottom:1px solid #e8e2d0}
.rft{margin:10px 14px 0;padding-top:10px;border-top:1.5px dashed #ccc8b8;display:flex;justify-content:space-between;align-items:flex-end}
.rfl{font-size:10px;color:#9a9080;line-height:1.7}
.rstamp{display:inline-block;border:2px solid rgba(76,175,130,.7);color:#4caf82;font-size:10px;font-weight:700;padding:2px 8px;border-radius:3px;letter-spacing:2px;text-transform:uppercase;margin-bottom:3px}
.rsiglbl{font-size:9px;color:#9a9080;text-transform:uppercase;letter-spacing:1px}
.rsigname{font-family:Georgia,serif;font-size:13px;color:#1a1812;font-weight:700}
.rnote{text-align:center;padding:8px 14px;font-size:9px;color:#b0a898;margin-top:6px;border-top:1px solid #e8e2d0}

/* TOAST */
.toast{position:fixed;bottom:22px;left:50%;transform:translateX(-50%) translateY(10px);background:var(--card);padding:11px 18px;border-radius:25px;font-size:13px;font-weight:500;opacity:0;transition:all .3s;z-index:999;white-space:nowrap;pointer-events:none;border:1px solid var(--bdrL)}
.toast.on{opacity:1;transform:translateX(-50%) translateY(0)}
.toast.gold{border-color:var(--goldD);color:var(--gold)}
.toast.grn{border-color:var(--grnD);color:var(--grn)}
.hide{display:none!important}
</style>
</head>
<body>

<div class="hdr">
  <div class="hdr-top">
    <div class="logowrap">
      <div class="logobox"><img src="data:image/jpeg;base64,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" alt=""></div>
      <div><div class="logotxt">Î•Ï€Î¹Ï„Î±Î³Î¿Î›Î®Ï€Ï„Î·Ï‚</div><div class="logosub">Daios Plastics SA</div></div>
    </div>
    <div class="badge">AI Â· PDF</div>
  </div>
  <div class="nav">
    <button class="ntab on" onclick="goTab('scan',this)"><span style="font-size:17px">ğŸ“‹</span>Î‘Ï€ÏŒÎ´ÎµÎ¹Î¾Î·</button>
    <button class="ntab" onclick="goTab('history',this)"><span style="font-size:17px">ğŸ—‚ï¸</span>Î™ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ</button>
    <button class="ntab" onclick="goTab('settings',this)"><span style="font-size:17px">âš™ï¸</span>Î¡Ï…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚</button>
  </div>
</div>

<div class="main">

<!-- SCAN TAB -->
<div id="tab-scan" class="tab on">

  <!-- build view -->
  <div id="v-build">
    <div class="card">
      <div class="ctitle">ğŸ“‹ ÎÎ­Î± Î‘Ï€ÏŒÎ´ÎµÎ¹Î¾Î·</div>
      <div class="fld"><label class="lbl">Î•ÎºÎ´ÏŒÏ„Î·Ï‚ / Î ÎµÎ»Î¬Ï„Î·Ï‚</label><input id="f-issuer" class="inp" type="text" placeholder="Ï€.Ï‡. Î Î±Ï€Î±Î´ÏŒÏ€Î¿Ï…Î»Î¿Ï‚ Î‘Î•"></div>
      <div class="fld"><label class="lbl">Î‘Î¹Ï„Î¹Î¿Î»Î¿Î³Î¯Î±</label><input id="f-reason" class="inp" type="text" placeholder="Ï€.Ï‡. Î•Î¾ÏŒÏ†Î»Î·ÏƒÎ· Ï„Î¹Î¼Î¿Î»Î¿Î³Î¯Ï‰Î½"></div>
      <div class="fld"><label class="lbl">Î Î±ÏÎ±Î»Î®Ï€Ï„Î·Ï‚</label><input id="f-recipient" class="inp" type="text" value="Daios Plastics SA"></div>
    </div>

    <div class="card">
      <div class="ctitle">ğŸ¦ Î•Ï€Î¹Ï„Î±Î³Î­Ï‚</div>
      <div id="chq-list"></div>
      <button class="btn-dashed" style="margin-bottom:10px" onclick="addCheque()">ï¼‹ Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î•Ï€Î¹Ï„Î±Î³Î®Ï‚</button>
      <div id="total-bar" class="total hide">
        <div><div class="total-lbl">Î£ÏÎ½Î¿Î»Î¿</div><div class="total-sub" id="total-sub"></div></div>
        <div class="total-val" id="total-val">â‚¬ 0,00</div>
      </div>
      <button class="btn btn-grn" onclick="generate()">ğŸ“„ Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Î‘Ï€ÏŒÎ´ÎµÎ¹Î¾Î·Ï‚</button>
      <button class="btn btn-ghost" style="margin-top:7px;padding:10px" onclick="resetAll()">â†© ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚</button>
    </div>
  </div>

  <!-- receipt view -->
  <div id="v-receipt" class="hide">
    <div class="card">
      <div class="ctitle">âœ… Î‘Ï€ÏŒÎ´ÎµÎ¹Î¾Î· Î Î±ÏÎ±Î»Î±Î²Î®Ï‚</div>
      <div class="rwrap" id="receipt-preview"></div>
      <div class="sgrid">
        <button class="sbtn" style="color:#d4a853;border-color:rgba(212,168,83,.3)" onclick="doPrint()">ğŸ“¥ PDF</button>
        <button class="sbtn" style="color:#6aa3e8;border-color:rgba(106,163,232,.3)" onclick="doEmail()">ğŸ“§ Email</button>
        <button class="sbtn" style="color:#25d366;border-color:rgba(37,211,102,.3)" onclick="doWA()">ğŸ’¬ WhatsApp</button>
        <button class="sbtn" style="color:#9f7aea;border-color:rgba(159,122,234,.3)" onclick="doViber()">ğŸ“² Viber</button>
      </div>
      <button class="btn btn-ghost" onclick="newReceipt()">âœ¦ ÎÎ­Î± Î‘Ï€ÏŒÎ´ÎµÎ¹Î¾Î·</button>
    </div>
  </div>

</div>

<!-- HISTORY TAB -->
<div id="tab-history" class="tab">
  <div id="h-empty" class="empty"><div style="font-size:48px;margin-bottom:12px;opacity:.4">ğŸ“­</div><div style="font-size:13px;line-height:1.6">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î±Ï€Î¿Î¸Î·ÎºÎµÏ…Î¼Î­Î½ÎµÏ‚<br>Î±Ï€Î¿Î´ÎµÎ¯Î¾ÎµÎ¹Ï‚ Î±ÎºÏŒÎ¼Î±.</div></div>
  <div id="h-list"></div>
</div>

<!-- SETTINGS TAB -->
<div id="tab-settings" class="tab">
  <div class="card">
    <div class="ctitle">ğŸ¢ Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± Î•Ï€Î¹Ï‡ÎµÎ¯ÏÎ·ÏƒÎ·Ï‚</div>
    <div class="fld"><label class="lbl">Î‘Î¦Îœ</label><input id="s-afm" class="inp" type="text" inputmode="numeric" placeholder="123456789" oninput="saveSett()"></div>
    <div class="fld"><label class="lbl">Î”Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ·</label><input id="s-addr" class="inp" type="text" placeholder="ÎŸÎ´ÏŒÏ‚ Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚, Î ÏŒÎ»Î·" oninput="saveSett()"></div>
    <div class="fld"><label class="lbl">Î¤Î·Î»Î­Ï†Ï‰Î½Î¿</label><input id="s-tel" class="inp" type="tel" placeholder="210 000 0000" oninput="saveSett()"></div>
  </div>
  <div class="card">
    <div class="ctitle">ğŸ—‘ï¸ Î”ÎµÎ´Î¿Î¼Î­Î½Î±</div>
    <p style="font-size:13px;color:var(--txtD);margin-bottom:10px;line-height:1.6">Î¤Î± Î´ÎµÎ´Î¿Î¼Î­Î½Î± Î±Ï€Î¿Î¸Î·ÎºÎµÏÎ¿Î½Ï„Î±Î¹ Ï„Î¿Ï€Î¹ÎºÎ¬ ÏƒÏ„Î· ÏƒÏ…ÏƒÎºÎµÏ…Î® ÏƒÎ¿Ï….</p>
    <button class="btn btn-red" onclick="clearHist()">ğŸ—‘ï¸ Î”Î¹Î±Î³ÏÎ±Ï†Î® Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÎ¿Ï</button>
  </div>
</div>

</div><!-- /main -->

<!-- PHOTO MODAL -->
<div id="photo-modal" class="poverlay hide" onclick="if(event.target===this)closePhoto()">
  <div class="pbox">
    <div class="mhandle"></div>
    <div style="font-family:Georgia,serif;font-size:15px;font-weight:600;color:#f5f2ea;margin-bottom:12px">ğŸ“· Î¦Ï‰Ï„Î¿Î³ÏÎ¬Ï†Î¹ÏƒÎµ Î•Ï€Î¹Ï„Î±Î³Î® <span id="pm-num" style="font-size:12px;color:var(--goldD)"></span></div>
    <input type="file" id="inp-cam" accept="image/*" capture="environment" onchange="handlePhoto(this)">
    <input type="file" id="inp-gal" accept="image/*" onchange="handlePhoto(this)">
    <div class="ugrid">
      <button class="ubtn" onclick="document.getElementById('inp-cam').value='';document.getElementById('inp-cam').click()"><span>ğŸ“·</span>ÎšÎ¬Î¼ÎµÏÎ±</button>
      <button class="ubtn" onclick="document.getElementById('inp-gal').value='';document.getElementById('inp-gal').click()"><span>ğŸ–¼ï¸</span>Î“ÎºÎ±Î»ÎµÏÎ¯</button>
    </div>
    <img id="pm-preview" class="previmg hide" alt="">
    <div id="pm-loader" class="loader hide"><div class="ring"></div><div style="font-size:13px;color:var(--txtD);text-align:center">AI Î±Î½Î¬Î³Î½Ï‰ÏƒÎ· ÎµÏ€Î¹Ï„Î±Î³Î®Ï‚â€¦</div></div>
    <button id="pm-analyze" class="btn btn-gold hide" onclick="runAI()">âœ¨ Î‘Î½Î¬Î³Î½Ï‰ÏƒÎ· Î¼Îµ AI</button>
    <button class="btn btn-ghost" style="margin-top:7px;padding:10px" onclick="closePhoto()">Î‘ÎºÏÏÏ‰ÏƒÎ·</button>
  </div>
</div>

<!-- HISTORY MODAL -->
<div id="hist-modal" class="moverlay hide" onclick="if(event.target===this)closeHist()">
  <div class="mbox">
    <div class="mhandle"></div>
    <div class="rwrap" id="hm-preview"></div>
    <div class="sgrid" id="hm-share"></div>
    <button class="btn btn-ghost" onclick="closeHist()">ÎšÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿</button>
  </div>
</div>

<div id="toast" class="toast"></div>

<script>
const LOGO='data:image/jpeg;base64,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';

let cheques=[];   // [{id,bank,checkNumber,amount,date,iban,ai}]
let receipts=[];
let settings={};
let currentRec=null;
let modalRec=null;
let aiTarget=null;  // cheque id being analyzed
let aiB64=null;
let toastT=null;

// â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
try{receipts=JSON.parse(localStorage.getItem('dp4_r')||'[]');}catch{}
try{settings=JSON.parse(localStorage.getItem('dp4_s')||'{}');}catch{}
loadSett();
renderHist();
addCheque();  // start with 1

// â”€â”€ Tabs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function goTab(id,btn){
  document.querySelectorAll('.tab').forEach(e=>e.classList.remove('on'));
  document.querySelectorAll('.ntab').forEach(e=>e.classList.remove('on'));
  document.getElementById('tab-'+id).classList.add('on');
  btn.classList.add('on');
  if(id==='history') renderHist();
}

// â”€â”€ Cheque CRUD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function addCheque(data){
  const id='c'+Date.now()+Math.random().toString(36).slice(2,6);
  cheques.push(data||{id,bank:'',checkNumber:'',amount:'',date:td(),iban:'',ai:false});
  renderCheques();
  updateTotal();
}

function delCheque(id){
  sync();
  cheques=cheques.filter(c=>c.id!==id);
  renderCheques();
  updateTotal();
}

// Read current DOM values into cheques array
function sync(){
  cheques=cheques.map(c=>{
    const el=document.getElementById('c-'+c.id);
    if(!el) return c;
    return {
      id:c.id,
      ai:c.ai,
      bank:el.querySelector('[name=bank]').value,
      checkNumber:el.querySelector('[name=cn]').value,
      amount:el.querySelector('[name=amt]').value,
      date:el.querySelector('[name=dt]').value,
      iban:el.querySelector('[name=iban]').value,
    };
  });
}

function renderCheques(){
  document.getElementById('chq-list').innerHTML=cheques.map((c,i)=>`
    <div class="chq" id="c-${c.id}">
      <div class="chq-hdr">
        <div>
          <div class="chq-lbl">Î•Ï€Î¹Ï„Î±Î³Î® ${i+1}</div>
          <div style="font-size:9px;margin-top:1px;color:${c.ai?'var(--grn)':'var(--txtM)'}">${c.ai?'âœ¦ AI':'âœï¸ Î§ÎµÎ¹Ï.'}</div>
        </div>
        <div style="display:flex;align-items:center;gap:10px">
          <div class="chq-amt" id="badge-${c.id}">${c.amount?'â‚¬'+fmt(c.amount):''}</div>
          <button class="chq-del" onclick="delCheque('${c.id}')">âœ•</button>
        </div>
      </div>
      <button class="chq-photo" onclick="sync();openPhoto('${c.id}',${i+1})">ğŸ“· Î¦Ï‰Ï„Î¿Î³ÏÎ¬Ï†Î¹ÏƒÎµ + AI</button>
      <div class="g2">
        <div class="fld"><label class="lbl">Î Î¿ÏƒÏŒ (â‚¬)</label><input name="amt" type="number" inputmode="decimal" class="inp${c.ai?' ai':''}" placeholder="0.00" value="${c.amount||''}" oninput="liveBadge('${c.id}',this.value)"></div>
        <div class="fld"><label class="lbl">Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±</label><input name="dt" type="date" class="inp${c.ai?' ai':''}" value="${c.date||td()}"></div>
        <div class="fld"><label class="lbl">Î¤ÏÎ¬Ï€ÎµÎ¶Î±</label><input name="bank" type="text" class="inp${c.ai?' ai':''}" placeholder="Ï€.Ï‡. Alpha Bank" value="${c.bank||''}"></div>
        <div class="fld"><label class="lbl">Î‘Ï. Î•Ï€Î¹Ï„Î±Î³Î®Ï‚</label><input name="cn" type="text" class="inp${c.ai?' ai':''}" placeholder="00123456" value="${c.checkNumber||''}"></div>
      </div>
      <div class="fld"><label class="lbl">IBAN (Ï€ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÏŒ)</label><input name="iban" type="text" class="inp" placeholder="GRâ€¦" value="${c.iban||''}"></div>
    </div>`).join('');
}

function liveBadge(id,val){
  const el=document.getElementById('badge-'+id);
  if(el) el.textContent=parseFloat(val)>0?'â‚¬'+fmt(val):'';
  updateTotal();
}

function updateTotal(){
  const amts=cheques.map(c=>{
    const el=document.getElementById('c-'+c.id);
    return el?parseFloat(el.querySelector('[name=amt]').value)||0:0;
  });
  const tot=amts.reduce((a,b)=>a+b,0);
  const cnt=amts.filter(a=>a>0).length;
  const bar=document.getElementById('total-bar');
  if(cheques.length>1||tot>0){
    bar.classList.remove('hide');
    document.getElementById('total-val').textContent='â‚¬ '+fmt(tot);
    document.getElementById('total-sub').textContent=cnt+' ÎµÏ€Î¹Ï„Î±Î³'+(cnt===1?'Î®':'Î­Ï‚');
  } else {
    bar.classList.add('hide');
  }
}

// â”€â”€ Photo modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function openPhoto(id,num){
  aiTarget=id; aiB64=null;
  document.getElementById('pm-num').textContent='#'+num;
  document.getElementById('pm-preview').classList.add('hide');
  document.getElementById('pm-loader').classList.add('hide');
  document.getElementById('pm-analyze').classList.add('hide');
  document.getElementById('inp-cam').value='';
  document.getElementById('inp-gal').value='';
  document.getElementById('photo-modal').classList.remove('hide');
}

function closePhoto(){
  document.getElementById('photo-modal').classList.add('hide');
  aiTarget=null; aiB64=null;
}

function handlePhoto(input){
  const file=input.files&&input.files[0];
  if(!file) return;
  const url=URL.createObjectURL(file);
  const img=new Image();
  img.onload=function(){
    let w=img.naturalWidth,h=img.naturalHeight;
    const mx=1000;
    if(w>mx||h>mx){const r=Math.min(mx/w,mx/h);w=Math.round(w*r);h=Math.round(h*r);}
    const cv=document.createElement('canvas');cv.width=w;cv.height=h;
    cv.getContext('2d').drawImage(img,0,0,w,h);
    aiB64=cv.toDataURL('image/jpeg',.78).split(',')[1];
    URL.revokeObjectURL(url);
    const pv=document.getElementById('pm-preview');
    pv.src='data:image/jpeg;base64,'+aiB64;
    pv.classList.remove('hide');
    document.getElementById('pm-analyze').classList.remove('hide');
  };
  img.src=url;
}

async function runAI(){
  if(!aiB64||!aiTarget) return;
  document.getElementById('pm-analyze').classList.add('hide');
  document.getElementById('pm-loader').classList.remove('hide');
  try{
    const res=await fetch('https://api.anthropic.com/v1/messages',{
      method:'POST',headers:{'Content-Type':'application/json'},
      body:JSON.stringify({
        model:'claude-sonnet-4-20250514',max_tokens:300,
        messages:[{role:'user',content:[
          {type:'image',source:{type:'base64',media_type:'image/jpeg',data:aiB64}},
          {type:'text',text:'Î•Ï€Î¹Ï„Î±Î³Î®. ÎœÎŸÎÎŸ JSON, Ï„Î¯Ï€Î¿Ï„Îµ Î¬Î»Î»Î¿:
{"amount":null,"date":null,"bank":null,"checkNumber":null,"iban":null}
date=YYYY-MM-DD, amount=Î±ÏÎ¹Î¸Î¼ÏŒÏ‚ Î¼ÏŒÎ½Î¿, null Î±Î½ Î´ÎµÎ½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹.'}
        ]}]
      })
    });
    if(!res.ok) throw new Error(res.status);
    const j=await res.json();
    const txt=(j.content&&j.content[0]&&j.content[0].text||'{}').replace(/```[a-z]*
?/gi,'').trim();
    let p={};try{p=JSON.parse(txt);}catch{}
    // update cheque
    const c=cheques.find(x=>x.id===aiTarget);
    if(c){
      if(p.amount!=null) c.amount=String(p.amount);
      if(p.date!=null) c.date=p.date;
      if(p.bank!=null) c.bank=p.bank;
      if(p.checkNumber!=null) c.checkNumber=p.checkNumber;
      if(p.iban!=null) c.iban=p.iban;
      c.ai=true;
    }
    renderCheques();
    updateTotal();
    closePhoto();
    toast('âœ¨ Î— AI Î´Î¹Î¬Î²Î±ÏƒÎµ Ï„Î·Î½ ÎµÏ€Î¹Ï„Î±Î³Î®!','gold');
  }catch{
    document.getElementById('pm-loader').classList.add('hide');
    document.getElementById('pm-analyze').classList.remove('hide');
    toast('âš ï¸ Î£Ï†Î¬Î»Î¼Î± AI â€“ Î´Î¿ÎºÎ¯Î¼Î±ÏƒÎµ Î¾Î±Î½Î¬');
  }
}

// â”€â”€ Generate â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function generate(){
  sync();
  const valid=cheques.filter(c=>parseFloat(c.amount)>0);
  if(!valid.length){toast('âš ï¸ Î ÏÏŒÏƒÎ¸ÎµÏƒÎµ Ï„Î¿Ï…Î»Î¬Ï‡Î¹ÏƒÏ„Î¿Î½ Î¼Î¯Î± ÎµÏ€Î¹Ï„Î±Î³Î® Î¼Îµ Ï€Î¿ÏƒÏŒ!');return;}
  const total=valid.reduce((s,c)=>s+parseFloat(c.amount),0);
  const rec={
    id:Date.now(),
    receiptNum:'Î‘Î -'+String(Date.now()).slice(-6),
    issuer:document.getElementById('f-issuer').value||'â€”',
    reason:document.getElementById('f-reason').value||'â€”',
    recipient:document.getElementById('f-recipient').value||'Daios Plastics SA',
    cheques:valid,
    total,
    createdAt:new Date().toISOString(),
    afm:settings.afm||'',
    addr:settings.addr||'',
    tel:settings.tel||'',
  };
  currentRec=rec;
  receipts.unshift(rec);
  if(receipts.length>100) receipts.pop();
  try{localStorage.setItem('dp4_r',JSON.stringify(receipts));}catch{}
  document.getElementById('receipt-preview').innerHTML=buildRDoc(rec);
  document.getElementById('v-build').classList.add('hide');
  document.getElementById('v-receipt').classList.remove('hide');
  toast('âœ… Î‘Ï€ÏŒÎ´ÎµÎ¹Î¾Î· Î±Ï€Î¿Î¸Î·ÎºÎµÏÏ„Î·ÎºÎµ!','grn');
}

function newReceipt(){
  cheques=[];
  document.getElementById('f-issuer').value='';
  document.getElementById('f-reason').value='';
  document.getElementById('f-recipient').value=settings.name||'Daios Plastics SA';
  currentRec=null;
  document.getElementById('v-build').classList.remove('hide');
  document.getElementById('v-receipt').classList.add('hide');
  addCheque();
}

function resetAll(){
  cheques=[];
  document.getElementById('f-issuer').value='';
  document.getElementById('f-reason').value='';
  document.getElementById('f-recipient').value=settings.name||'Daios Plastics SA';
  addCheque();
  updateTotal();
}

// â”€â”€ Receipt HTML â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function fmt(n){return Number(n).toLocaleString('el-GR',{minimumFractionDigits:2,maximumFractionDigits:2});}
function words(n){const e=Math.floor(Number(n)),c=Math.round((Number(n)-e)*100);return e.toLocaleString('el-GR')+' ÎµÏ…ÏÏ'+(c>0?' ÎºÎ±Î¹ '+c+' Î»ÎµÏ€Ï„Î¬':'');}
function td(){return new Date().toISOString().split('T')[0];}
function fmtd(s){return s?new Date(s+'T12:00:00').toLocaleDateString('el-GR'):'â€”';}

function buildRDoc(r){
  const many=r.cheques.length>1;
  const cf=new Date(r.createdAt).toLocaleDateString('el-GR');
  const chHTML=r.cheques.map((c,i)=>`
    <div class="rchqblock">
      <div class="rchqlbl">Î•Ï€Î¹Ï„Î±Î³Î® ${i+1}${many?' &nbsp;â€”&nbsp; â‚¬'+fmt(c.amount):''}</div>
      <div>
        ${many?`<div class="rrow"><span class="rrk">Î Î¿ÏƒÏŒ</span><span class="rrv" style="color:#1a7040;font-size:13px;font-weight:700">â‚¬ ${fmt(c.amount)}</span></div>`:''}
        <div class="rrow"><span class="rrk">Î¤ÏÎ¬Ï€ÎµÎ¶Î±</span><span class="rrv">${c.bank||'â€”'}</span></div>
        <div class="rrow"><span class="rrk">Î‘Ï. Î•Ï€Î¹Ï„Î±Î³Î®Ï‚</span><span class="rrv">${c.checkNumber||'â€”'}</span></div>
        <div class="rrow"><span class="rrk">Î—Î¼/Î½Î¯Î±</span><span class="rrv">${fmtd(c.date)}</span></div>
        ${c.iban?`<div class="rrow"><span class="rrk">IBAN</span><span class="rrv">${c.iban}</span></div>`:''}
      </div>
    </div>`).join('');

  return `<div class="rdoc">
    <div class="rhd">
      <div class="rhd-row">
        <div class="rlogo"><img src="${LOGO}" alt=""></div>
        <div><div class="rco">DAIOS PLASTICS SA</div>${r.afm?`<div class="rafm">Î‘Î¦Îœ: ${r.afm}</div>`:''}</div>
      </div>
      <div class="rtitle">Î‘Î ÎŸÎ”Î•Î™ÎÎ— Î Î‘Î¡Î‘Î›Î‘Î’Î—Î£</div>
      <div class="rsub">Î•Î Î™Î¤Î‘Î“${many?'Î©Î':'Î—Î£'} Â· RECEIPT OF CHEQUE${many?'S':''}</div>
    </div>
    <div class="rmeta"><div>Î‘Ï. <strong style="color:#1a1812">${r.receiptNum}</strong></div><div>Î—Î¼/Î½Î¯Î±: <strong style="color:#1a1812">${cf}</strong></div></div>
    <div class="ramtbox">
      <div class="ramtlbl">${many?'Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ Î Î¿ÏƒÏŒ ('+r.cheques.length+' ÎµÏ€Î¹Ï„Î±Î³Î­Ï‚)':'Î Î±ÏÎµÎ»Î®Ï†Î¸Î· Î Î¿ÏƒÏŒ'}</div>
      <div class="ramtval">â‚¬ ${fmt(r.total)}</div>
      <div class="ramtw">${words(r.total)}</div>
    </div>
    <div class="rsec"><div class="rsectitle">Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± Î•Ï€Î¹Ï„Î±Î³${many?'ÏÎ½':'Î®Ï‚'}</div>${chHTML}</div>
    <div class="rcommon">
      <div class="rrow"><span class="rrk">Î•ÎºÎ´ÏŒÏ„Î·Ï‚</span><span class="rrv" style="font-size:12px">${r.issuer}</span></div>
      <div class="rrow"><span class="rrk">Î‘Î¹Ï„Î¹Î¿Î»Î¿Î³Î¯Î±</span><span class="rrv" style="font-size:12px">${r.reason}</span></div>
    </div>
    <div class="rft">
      <div class="rfl">${r.addr||''}${r.tel?'<br>Î¤Î·Î»: '+r.tel:''}</div>
      <div style="text-align:right">
        <div class="rstamp">Î Î‘Î¡Î•Î›Î‘Î’Î‘</div>
        <div class="rsiglbl">ÎŸ/Î— Î Î±ÏÎ±Î»Î±Î²ÏÎ½</div>
        <div class="rsigname">${r.recipient}</div>
      </div>
    </div>
    <div class="rnote">Î— Î±Ï€ÏŒÎ´ÎµÎ¹Î¾Î· ÎµÎºÎ´ÏŒÎ¸Î·ÎºÎµ Î·Î»ÎµÎºÏ„ÏÎ¿Î½Î¹ÎºÎ¬.</div>
  </div>`;
}

// â”€â”€ Print/Share â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function getD(){return modalRec||currentRec;}

function doPrint(d){
  const r=d||getD(); if(!r) return;
  const many=r.cheques.length>1;
  const cf=new Date(r.createdAt).toLocaleDateString('el-GR');
  const chHTML=r.cheques.map((c,i)=>{
    const df=fmtd(c.date);
    return `<div style="border:1px solid #e0d8c8;border-radius:6px;padding:8px 10px;margin-bottom:6px;background:#faf8f2">
      <div style="font-size:9px;font-weight:700;color:#9a7a40;text-transform:uppercase;letter-spacing:1px;margin-bottom:4px">Î•Ï€Î¹Ï„Î±Î³Î® ${i+1}${many?' â€” â‚¬'+fmt(c.amount):''}</div>
      ${many?`<div style="display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid #ede8dc"><span style="font-size:9px;color:#9a9080;text-transform:uppercase">Î Î¿ÏƒÏŒ</span><span style="font-size:12px;font-weight:700;color:#1a7040">â‚¬ ${fmt(c.amount)}</span></div>`:''}
      <div style="display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid #ede8dc"><span style="font-size:9px;color:#9a9080;text-transform:uppercase">Î¤ÏÎ¬Ï€ÎµÎ¶Î±</span><span style="font-size:11px;font-weight:600">${c.bank||'â€”'}</span></div>
      <div style="display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid #ede8dc"><span style="font-size:9px;color:#9a9080;text-transform:uppercase">Î‘Ï. Î•Ï€Î¹Ï„Î±Î³Î®Ï‚</span><span style="font-size:11px;font-weight:600">${c.checkNumber||'â€”'}</span></div>
      <div style="display:flex;justify-content:space-between;padding:4px 0${c.iban?';border-bottom:1px solid #ede8dc':''}"><span style="font-size:9px;color:#9a9080;text-transform:uppercase">Î—Î¼/Î½Î¯Î±</span><span style="font-size:11px;font-weight:600">${df}</span></div>
      ${c.iban?`<div style="display:flex;justify-content:space-between;padding:4px 0"><span style="font-size:9px;color:#9a9080;text-transform:uppercase">IBAN</span><span style="font-size:11px;font-weight:600">${c.iban}</span></div>`:''}
    </div>`;
  }).join('');
  const win=window.open('','_blank');
  if(!win){toast('âš ï¸ Î•Ï€Î­Ï„ÏÎµÏˆÎµ Ï„Î± pop-ups');return;}
  win.document.write(`<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Î‘Ï€ÏŒÎ´ÎµÎ¹Î¾Î· ${r.receiptNum}</title>
<style>*{box-sizing:border-box;margin:0;padding:0}body{font-family:Arial,sans-serif;background:#fff}
.w{max-width:420px;margin:0 auto;background:#faf8f2}
.hd{background:#1a1812;padding:14px}
.hr{display:flex;align-items:center;gap:10px;margin-bottom:8px}
.hl{width:44px;height:44px;background:#fff;border-radius:6px;overflow:hidden;display:flex;align-items:center;justify-content:center}
.hl img{max-width:100%;max-height:100%;object-fit:contain}
.hc{font-family:Georgia,serif;font-size:14px;color:#d4a853;font-weight:700}
.ht{text-align:center;font-family:Georgia,serif;font-size:16px;color:#d4a853;font-weight:700;letter-spacing:1px;margin-top:4px}
.hs{text-align:center;font-size:9px;color:rgba(212,168,83,.4);letter-spacing:2px}
.mt{display:flex;justify-content:space-between;padding:7px 14px;background:#f0ece0;font-size:11px;color:#7a7060}
.ab{background:#1a1812;padding:14px;text-align:center}
.av{font-family:Georgia,serif;font-size:30px;color:#d4a853;font-weight:700}
.aw{font-size:10px;color:rgba(212,168,83,.4);font-style:italic;margin-top:3px}
.sec{padding:10px 14px 4px;background:#f5f0e4}
.st{font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:#7a6a50;margin-bottom:6px}
.cm{padding:8px 14px 0}
.rw{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid #e8e2d0;gap:8px}
.rk{font-size:9px;color:#9a9080;text-transform:uppercase;letter-spacing:.8px;flex-shrink:0}
.rv{font-size:12px;font-weight:600;text-align:right;color:#1a1812}
.ft{margin:10px 14px 0;padding-top:10px;border-top:1.5px dashed #ccc8b8;display:flex;justify-content:space-between;align-items:flex-end}
.fl{font-size:10px;color:#9a9080;line-height:1.7}
.stamp{display:inline-block;border:2px solid rgba(76,175,130,.7);color:#4caf82;font-size:10px;font-weight:700;padding:2px 8px;border-radius:3px;letter-spacing:2px;text-transform:uppercase;margin-bottom:3px}
.sn{font-family:Georgia,serif;font-size:13px;color:#1a1812;font-weight:700}
.nt{text-align:center;padding:8px 14px;font-size:9px;color:#b0a898;margin-top:6px;border-top:1px solid #e8e2d0}
.pb{display:block;max-width:420px;margin:14px auto;padding:13px;background:#1a1812;color:#d4a853;border:none;border-radius:9px;font-size:14px;font-weight:600;cursor:pointer}
@media print{.pb{display:none}}</style></head><body>
<div class="w">
<div class="hd"><div class="hr"><div class="hl"><img src="${LOGO}"></div><div><div class="hc">DAIOS PLASTICS SA</div>${r.afm?'<div style="font-size:9px;color:rgba(212,168,83,.5);letter-spacing:2px">Î‘Î¦Îœ: '+r.afm+'</div>':''}</div></div>
<div class="ht">Î‘Î ÎŸÎ”Î•Î™ÎÎ— Î Î‘Î¡Î‘Î›Î‘Î’Î—Î£</div><div class="hs">Î•Î Î™Î¤Î‘Î“${many?'Î©Î':'Î—Î£'} Â· RECEIPT OF CHEQUE${many?'S':''}</div></div>
<div class="mt"><div>Î‘Ï. <strong>${r.receiptNum}</strong></div><div>Î—Î¼/Î½Î¯Î±: <strong>${cf}</strong></div></div>
<div class="ab"><div style="font-size:9px;color:rgba(212,168,83,.5);text-transform:uppercase;letter-spacing:2px;margin-bottom:3px">${many?'Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ Î Î¿ÏƒÏŒ ('+r.cheques.length+' ÎµÏ€Î¹Ï„Î±Î³Î­Ï‚)':'Î Î±ÏÎµÎ»Î®Ï†Î¸Î· Î Î¿ÏƒÏŒ'}</div>
<div class="av">â‚¬ ${fmt(r.total)}</div><div class="aw">${words(r.total)}</div></div>
<div class="sec"><div class="st">Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± Î•Ï€Î¹Ï„Î±Î³${many?'ÏÎ½':'Î®Ï‚'}</div>${chHTML}</div>
<div class="cm">
<div class="rw"><span class="rk">Î•ÎºÎ´ÏŒÏ„Î·Ï‚</span><span class="rv">${r.issuer}</span></div>
<div class="rw"><span class="rk">Î‘Î¹Ï„Î¹Î¿Î»Î¿Î³Î¯Î±</span><span class="rv">${r.reason}</span></div>
</div>
<div class="ft"><div class="fl">${r.addr||''}${r.tel?'<br>Î¤Î·Î»: '+r.tel:''}</div>
<div style="text-align:right"><div class="stamp">Î Î‘Î¡Î•Î›Î‘Î’Î‘</div><div style="font-size:9px;color:#9a9080;text-transform:uppercase;letter-spacing:1px">ÎŸ/Î— Î Î±ÏÎ±Î»Î±Î²ÏÎ½</div><div class="sn">${r.recipient}</div></div></div>
<div class="nt">Î— Î±Ï€ÏŒÎ´ÎµÎ¹Î¾Î· ÎµÎºÎ´ÏŒÎ¸Î·ÎºÎµ Î·Î»ÎµÎºÏ„ÏÎ¿Î½Î¹ÎºÎ¬.</div>
</div>
<button class="pb" onclick="window.print()">ğŸ–¨ï¸ Î•ÎºÏ„ÏÏ€Ï‰ÏƒÎ· / Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· PDF</button>
</body></html>`);
  win.document.close();
}

function buildTxt(r){
  const lines=['ğŸ“‹ Î‘Î ÎŸÎ”Î•Î™ÎÎ— Î Î‘Î¡Î‘Î›Î‘Î’Î—Î£ Î•Î Î™Î¤Î‘Î“'+(r.cheques.length>1?'Î©Î':'Î—Î£'),'Î‘Ï: '+r.receiptNum,'Î•ÎºÎ´ÏŒÏ„Î·Ï‚: '+r.issuer,'Î£ÏÎ½Î¿Î»Î¿: â‚¬'+fmt(r.total),''];
  r.cheques.forEach((c,i)=>lines.push('Î•Ï€Î¹Ï„Î±Î³Î® '+(i+1)+': â‚¬'+fmt(c.amount)+' | '+c.bank+' | Î‘Ï.'+c.checkNumber+' | '+fmtd(c.date)));
  lines.push('','Î‘Î¹Ï„Î¹Î¿Î»Î¿Î³Î¯Î±: '+r.reason,'Î Î±ÏÎ­Î»Î±Î²Îµ: '+r.recipient);
  return lines.join('
');
}
function doEmail(){const r=getD();window.location.href='mailto:?subject='+encodeURIComponent('Î‘Ï€ÏŒÎ´ÎµÎ¹Î¾Î· '+r.receiptNum+' â€“ â‚¬'+fmt(r.total))+'&body='+encodeURIComponent(buildTxt(r));}
function doWA(){window.open('https://wa.me/?text='+encodeURIComponent(buildTxt(getD())),'_blank');}
function doViber(){window.open('viber://forward?text='+encodeURIComponent(buildTxt(getD())));}

// â”€â”€ History â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderHist(){
  const lst=document.getElementById('h-list');
  const emp=document.getElementById('h-empty');
  if(!receipts.length){lst.innerHTML='';emp.classList.remove('hide');return;}
  emp.classList.add('hide');
  lst.innerHTML=receipts.map(r=>`
    <div class="hitem" onclick="openHistModal(${r.id})">
      <div class="hico"><img src="${LOGO}" alt=""></div>
      <div class="hmeta">
        <div class="hname">${r.issuer}</div>
        <div class="hsub">${r.receiptNum} Â· ${new Date(r.createdAt).toLocaleDateString('el-GR')}</div>
      </div>
      <div>
        <div class="hamt">â‚¬${fmt(r.total)}</div>
        <div class="hcnt">${r.cheques.length} ÎµÏ€Î¹Ï„Î±Î³${r.cheques.length===1?'Î®':'Î­Ï‚'}</div>
      </div>
    </div>`).join('');
}

function openHistModal(id){
  const r=receipts.find(x=>x.id===id); if(!r) return;
  modalRec=r;
  document.getElementById('hm-preview').innerHTML=buildRDoc(r);
  document.getElementById('hm-share').innerHTML=`
    <button class="sbtn" style="color:#d4a853;border-color:rgba(212,168,83,.3)" onclick="doPrint()">ğŸ“¥ PDF</button>
    <button class="sbtn" style="color:#6aa3e8;border-color:rgba(106,163,232,.3)" onclick="doEmail()">ğŸ“§ Email</button>
    <button class="sbtn" style="color:#25d366;border-color:rgba(37,211,102,.3)" onclick="doWA()">ğŸ’¬ WhatsApp</button>
    <button class="sbtn" style="color:#9f7aea;border-color:rgba(159,122,234,.3)" onclick="doViber()">ğŸ“² Viber</button>`;
  document.getElementById('hist-modal').classList.remove('hide');
  document.body.style.overflow='hidden';
}
function closeHist(){document.getElementById('hist-modal').classList.add('hide');document.body.style.overflow='';modalRec=null;}

// â”€â”€ Settings â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function loadSett(){
  if(settings.afm) document.getElementById('s-afm').value=settings.afm;
  if(settings.addr) document.getElementById('s-addr').value=settings.addr;
  if(settings.tel) document.getElementById('s-tel').value=settings.tel;
  if(settings.name) document.getElementById('f-recipient').value=settings.name;
}
function saveSett(){
  settings.afm=document.getElementById('s-afm').value;
  settings.addr=document.getElementById('s-addr').value;
  settings.tel=document.getElementById('s-tel').value;
  try{localStorage.setItem('dp4_s',JSON.stringify(settings));}catch{}
}
function clearHist(){
  if(!confirm('Î”Î¹Î±Î³ÏÎ±Ï†Î® ÏŒÎ»Î¿Ï… Ï„Î¿Ï… Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÎ¿Ï;')) return;
  receipts=[];try{localStorage.removeItem('dp4_r');}catch{}
  renderHist();toast('ğŸ—‘ï¸ Î™ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ Î´Î¹Î±Î³ÏÎ¬Ï†Î·ÎºÎµ');
}

// â”€â”€ Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toast(msg,type=''){
  clearTimeout(toastT);
  const el=document.getElementById('toast');
  el.textContent=msg;el.className='toast on'+(type?' '+type:'');
  toastT=setTimeout(()=>el.classList.remove('on'),3200);
}
</script>
</body>
</html>